<!doctypehtml><html lang=en-US><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="width=device-width,initial-scale=1"name=viewport><title>Bernhard's RayTracer WASM</title><link href=styles.css rel=stylesheet></head><body><div id=visualization><img id=outimage></div><div class=title><a href="https://www.clemy.org/">Bernhard's RayTracer</a></div><div class=subtitle>RayTracer WebAssembly TestPad</div><div class=control-sidebar><div class=control-container id=help_menu><a class="expand-click expand-icon"href=# title="Click to open or close">-</a><div class="expand-click header">Load Examples<span class=subheader></span></div><div class=inner-container><p><table><tr><td><button id=example1 class=load>example1</button></td><td><button id=example2 class=load>example2</button></td><td><button id=example3 class=load>example3</button></td><td><button id=example4 class=load>example4</button></td><td><button id=example5 class=load>example5</button></td></tr><tr><td><button id=example6 class=load>example6</button></td><td><button id=example7 class=load>example7</button></td><td><button id=example8 class=load>example8</button></td><td><button id=example9 class=load>example9</button></td><td><button id=1_transparent class=load>transparent</button></td></tr><tr><td><button id=2_animation class=load>animation</button></td><td><button id=3_motionblur class=load>motionblur</button></td><td><button id=4_julia class=load>julia</button></td><td><button id=6_supersampling class=load>supersampling</button></td><td><button id=7_dof class=load>dof</button></td></tr><tr><td><button id=8_fresnel class=load>fresnel</button></td><td><button id=9_caustic class=load>caustic</button></td><td><button id=10_caustic_texture class=load>caustic_texture</button></td><td><button id=101_julia_shiny class=load>julia_shiny</button></td><td><button id=104_julia_animation class=load>julia_animation</button></td></tr></table></p></div></div><div class=control-container id=help_menu><a class="expand-click expand-icon"href=# title="Click to open or close">-</a><div class="expand-click header">Scene Data & Run<span class=subheader></span></div><div class=inner-container><p><button id=run disabled>Run RayTracer</button></p><p><textarea autocapitalize=off autocomplete=off autocorrect=off id=input rows=20 spellcheck=false></textarea></p></div></div><div class=control-container id=status_menu><a class="expand-click expand-icon"href=# title="Click to open or close">-</a><div class="expand-click header">Status<span class=subheader></span></div><div class=inner-container><progress hidden id=progress max=100 value=0></progress><p id=status>Loading application...</p></div></div></div><div id=wait><img alt=Loading src=bunny.png></div><script>const initialExampleName="example3",outFileName="out.png";var progressElement=document.getElementById("progress");function loadXML(e){const t=FS.readFile("examples/"+e+".xml",{encoding:"utf8"});document.getElementById("input").value=t}var Module={preInit:[],preRun:[],postRun:[()=>{console.log("postRun - Ready."),showStatus("Ready."),loadXML("example3")}],print:function(e){if(arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e),showStatus(e),e.startsWith("Finished")){const e=FS.readFile("out.png"),t=URL.createObjectURL(new Blob([e.buffer],{type:"image/png"}));document.getElementById("outimage").src=t,document.getElementById("outimage").style.display="unset",hideWait()}},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),showStatus(e,!0),console.error(e),hideWait()},setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1,showWait()):(progressElement.value=null,progressElement.max=null,progressElement.hidden=!0,e||hideWait()),showStatus(e))}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"Preparing run...")},noInitialRun:noInitialRun=!0};function showStatus(e,t=!1){if(0===e.length)return;const n=document.createElement("span");t&&n.classList.add("error"),n.innerText=`\n${e}`;const o=document.getElementById("status");for(o.appendChild(n);o.children.length>15;)o.removeChild(o.firstChild)}function showWait(){document.getElementById("wait").classList.remove("hide"),document.getElementById("run").disabled=!0}function hideWait(){document.getElementById("wait").classList.add("hide"),document.getElementById("run").disabled=!1}Module.setStatus("Downloading code..."),window.onerror=function(){showStatus("Exception thrown, see JavaScript console",showStatus.Severity.ERROR)},showStatus.Severity={ERROR:!0},Array.from(document.getElementsByClassName("expand-click")).forEach(e=>e.addEventListener("click",()=>{e.parentNode.querySelector(".inner-container").classList.toggle("hide"),e.parentNode.querySelector(".expand-icon").innerText="+"==e.parentNode.querySelector(".expand-icon").innerText?"-":"+"})),document.getElementById("run").addEventListener("click",()=>{showWait(),FS.writeFile("examples/input.xml",document.getElementById("input").value),Module.callMain(["examples/input.xml","out.png"])}),document.querySelectorAll(".load").forEach(e=>e.addEventListener("click",e=>loadXML(e.target.getAttribute("id"))))</script><script async src=raytracer.js></script></body></html>